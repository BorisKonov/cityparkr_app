{% extends 'base.html' %}

{% block title %}Log in - CityParkr{% endblock %}

{% block content %}
<div class="form-card" style="max-width: 480px;">
    <h2 style="margin-bottom: 8px;">Welcome back</h2>
    <p style="color: var(--muted); margin-bottom: 24px;">Login to manage your bookings and listings.</p>

    {% if form.errors %}
        <div style="background: #fee2e2; border: 1px solid #fecaca; color: #991b1b; padding: 12px; border-radius: 8px; margin-bottom: 20px; font-size: 14px;">
            Your username or password was incorrect. Please try again.
        </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <div class="form-group">
            <label for="id_username">Username</label>
            {{ form.username }}
        </div>

        <div class="form-group" style="position: relative;">
            <label for="id_password">Password</label>
            {{ form.password }}
            <span class="toggle-password" onclick="togglePassword()" style="position: absolute; right: 12px; top: 38px; cursor: pointer; font-size: 14px; font-weight: 600; text-decoration: underline;">Show</span>
        </div>

        <button class="btn-primary" type="submit">Log in</button>

        {% if next %}
            <p style="margin-top: 16px; font-size: 13px; color: var(--muted); text-align: center;">
                Redirecting to: <strong>{{ next }}</strong>
            </p>
        {% endif %}
    </form>

    <p style="text-align: center; margin-top: 24px; font-size: 14px;">
        Don't have an account? <a href="{% url 'signup' %}" style="text-decoration: underline; font-weight: 600;">Sign up</a>
    </p>
</div>

<script>
    function togglePassword() {
      var passwordInput = document.getElementById("id_password");
      var toggleBtn = document.querySelector(".toggle-password");
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        toggleBtn.textContent = "Hide";
      } else {
        passwordInput.type = "password";
        toggleBtn.textContent = "Show";
      }
    }
</script>
{% endblock %}
